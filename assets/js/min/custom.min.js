//  DMS RICARDO CUSTOM JS
(function(a){// END GLOBAL VARS -----------------------------
// --- GLOBAL FUNCTIONS ---------------------------- 
function b(a){var b=document.createElement("div");a="on"+a;var c=(a in b);return c||(b.setAttribute(a,"return;"),c="function"==typeof b[a]),b=null,c}// DMS CALL FN -- SHORTHAND
function c(b,c,d){0<a(b).length&&c(d)}// TOGGLE MENU MOBILE ON CLICK
function d(){// elements
var b=a("#dms-page"),c=a("body"),d=a(".js-mobile-menu"),e=a(".dms-hamburger");a(".dms-mobile-menu-toggle").on("click",function(a){a.stopPropagation(),c.toggleClass("menu-mobile-open"),b.toggleClass("menu-mobile-open"),e.toggleClass("menu-mobile-open"),d.toggleClass("dms-active")}),a("#dms-page").on("click",function(){c.removeClass("menu-mobile-open"),b.removeClass("menu-mobile-open"),e.removeClass("menu-mobile-open"),d.removeClass("dms-active")}),a(".dms-menu-overlay").click(function(){a(".dms-mobile-menu-toggle").click()})}function e(b){var c=b.css("background-image");if(0<a("#gallery-overlay").length)a("#gallery-popup").css({"background-image":c});else{var d=a("<div>",{id:"gallery-overlay",style:"display: none;"}),e=a("<div>",{id:"gallery-popup",style:"background-image:"+c+";"}),f=a("<a>",{id:"gallery-close",href:"javascript:void(0)",class:"fa fa-times-circle"});a("body").append(d),a("#gallery-overlay").append(e),a("#gallery-popup").append(f)}a("#gallery-overlay").fadeIn(),a("body").on("click","#gallery-close",function(){a("#gallery-overlay").fadeOut()}),a("body").on("click","#gallery-overlay",function(){a("#gallery-overlay").is(":visible")&&a("#gallery-overlay").fadeOut()})}// SLIDES PER VIEW RESPONSIVE
// BUTTON SEARCH EVENT
function f(){a(".js-dms-button-search").click(function(){a(".dms-search-form").submit()})}// CUSTOM RGL POPUP
function g(b){var c=b.dms_popup_container_classes,d=b.dms_content,e=b.dms_icon_classes;("undefined"==typeof b.dms_popup_container_classes||""==b.dms_popup_container_classes)&&(c="animated zoomIn"),("undefined"==typeof b.dms_content||""==b.dms_content)&&(d="content default"),("undefined"==typeof b.dms_icon_classes||""==b.dms_icon_classes)&&(e="fa fa-times"),a(".js-dms-r-popup__open").click(function(){var b=d,f="<div class='dms-popup-addedd__content'>"+b+"</div><div class='dms-popup-addedd__close js-dms-r-popup__close'><span class='"+e+"'></span></div>";a("<div class='dms-popup-addedd js-dms-r-popup__overlay'><div class='dms-popup-addedd__box js-dms-r-popup__container "+c+"'>"+f+"</div></div>").appendTo("body"),a(".js-dms-r-popup__overlay").click(function(){a(this).fadeOut(400,function(){a(this).remove()})}),a(".js-dms-r-popup__container").click(function(a){a.stopPropagation()}),a(".js-dms-r-popup__close").click(function(){a(".js-dms-r-popup__overlay").fadeOut(400,function(){a(this).remove()})})})}function h(){// browser window scroll (in pixels) after which the "back to top" link is shown
var//browser window scroll (in pixels) after which the "back to top" link opacity is reduced
//duration of the top scrolling animation (in ms)
//grab the "back to top" link
b=a(".dms-to-top");//hide or show the "back to top" link
//smooth scroll to top
a(window).scroll(function(){a(this).scrollTop()>20?b.addClass("dms-is-visible"):b.removeClass("dms-is-visible dms-fade-out"),a(this).scrollTop()>60&&b.addClass("dms-fade-out")}),b.on("click",function(b){b.preventDefault(),a("body, html").animate({scrollTop:0},1000)})}function i(){if(0==a("#dms-loader").length&&0==a("#dms-loader").length){a("body").append("<div id=\"dms-loader\" class=\"animated fadeIn\"><div class=\"overlay\"><div class=\"box\"><div class=\"loader loader--size-128 loader--thickness-10\"></div></div></div></div>")}}function j(){a("#dms-loader").remove()}function k(){a("#dms-loader").addClass("animated fadeOut"),a("#dms-loader").one(A,function(){a("#dms-loader").remove()})}// AJAX MORE POSTS
function l(){a(".js-dms-ajax-more-posts__button").click(function(){if(!1==a(this).hasClass("disable")){i();var b=a(this),c=b.attr("data-query"),d=b.data("paged"),e=b.data("post_type"),f=parseInt(d)+1;console.log("Post type: "+e);a.ajax({type:"POST",url:custom_data.dms_ajax_url,data:{action:"dms_ajax_more_posts",query:c,paged:d,post_type:e},dataType:"json"}).done(function(c){var d=c.html,e=c.ajax_status,g=c.debug,h=c.type;console.log(d),g&&console.log(g),console.log(c),200==e||601==e?(b.attr("paged",f),b.data("paged",f),a(".cajas").append(d),601==e&&(b.hide(100),b.addClass("disable"))):(b.hide(100),b.addClass("disable")),j()}).fail(function(a,b,c){console.log("error = "+a.status),console.log("error = "+b),console.log("error = "+c),j()})}})}/* // AJAX MORE NEWS
		function dms_ajax_more_news() {

			$(".js-dms-ajax-more-news__button").click( function(){

				createLoader();

				var button 	= $(this);
				var query 	= button.attr("data-query");
				var paged 	= button.data("paged");
				var next 	= parseInt( paged ) + 1;

				console.log("paged: " + paged);
				var data = {
					"action" 	: "dms_ajax_more_news",
					"query" 	: query,
					"paged" 	: paged,
				};

				$.ajax({
					type: "POST",
					url: custom_data.dms_ajax_url,
					data : data,
					dataType: 'json',
				})
				.done(function(result) {

					var html = result.html;
					var ajax_status = result.ajax_status;
					var debug = result.debug;
					console.log(html);
					if(debug) console.log(debug);

					if( ajax_status == 200 || ajax_status == 601 ){

						button.attr( "paged", next );
						button.data( "paged", next );

						$(".cajas").append( html );

						if( ajax_status == 601 ) button.hide(100); // NO MORE PAGES - BUTTON DISABLED

					}else{

						button.hide(100); // NO MORE PAGES - BUTTON DISABLED

					}

					removeLoader();

				})
				.fail(function(jqXHR, textStatus, errorThrown) {
					console.log("error = "+jqXHR.status);
				    console.log("error = "+textStatus);
				    console.log("error = "+errorThrown);
				    removeLoader();
				});
			});
			
		} */function m(){0<a(".apss-facebook > a").length&&(a(".dms-social-sharing .fa-facebook").removeClass("dms-inactive"),a(".dms-social-sharing .fa-facebook").click(function(){a(".apss-facebook > a").click()})),0<a(".apss-twitter > a").length&&(a(".dms-social-sharing .fa-twitter").removeClass("dms-inactive"),a(".dms-social-sharing .fa-twitter").click(function(){a(".apss-twitter > a").click()})),0<a(".apss-google-plus > a").length&&(a(".dms-social-sharing .fa-google-plus").removeClass("dms-inactive"),a(".dms-social-sharing .fa-google-plus").click(function(){a(".apss-google-plus > a").click()})),0<a(".apss-linkedin > a").length&&(a(".dms-social-sharing .fa-linkedin").removeClass("dms-inactive"),a(".dms-social-sharing .fa-linkedin").click(function(){a(".apss-linkedin > a").click()})),0<a(".apss-pinterest > a").length&&(a(".dms-social-sharing .fa-pinterest-p").removeClass("dms-inactive"),a(".dms-social-sharing .fa-pinterest-p").click(function(){var b=a(".apss-pinterest > a").attr("href");window.location.href=b})),0<a(".apss-email > a").length&&(a(".dms-social-sharing .fa-envelope").removeClass("dms-inactive"),a(".dms-social-sharing .fa-envelope").click(function(){var b=a(".apss-email > a").attr("href");window.location.href=b}))}// CUSTOM SELECT
function n(a){this.dd=a,this.placeholder=this.dd.children("span"),this.opts=this.dd.find(".js-dms-custom-select__dropdown > li"),this.the_text=this.dd.attr("data-label"),this.val=this.dd.attr("data-value"),this.index=-1,this.initEvents()}function o(){a(".js-dms-custom-select").each(function(){var b=new n(a(this));w.push(b)}),a(document).click(function(){// all dropdowns
a(".js-dms-custom-select").removeClass("dms-active")})}function p(){var a=document.getElementById("scene"),b=new Parallax(a)}function q(){new Swiper(".js-dms-primary-slider .swiper-container",{// Optional parameters
slidesPerView:3,direction:"horizontal",loop:!0,speed:1200,autoplayDisableOnInteraction:!1,/*slidesPerView: slidesPerViewSwiper(),*/autoplay:6e3,spaceBetween:30,pagination:".js-dms-primary-slider .swiper-pagination",paginationClickable:!0,nextButton:".js-dms-primary-slider .swiper-button-next",prevButton:".js-dms-primary-slider .swiper-button-prev",effect:"fade",fade:{crossFade:!0}})}// CHECK SELECTS (CUSTOM SELECT)
// function dms_check_custom_selects(){
// 	console.log(array_custom_selects);
// 	$.each( array_custom_selects, function( key, obj ) {
// 		var current_val_select = obj.getValue();
// 		console.log(current_val_select);
// 	});
// }
// function dmsExample(args){
// 	console.log(args);
// }
/* Con javascript */ /* function eventShowTextDescription(){
			document.getElementById("verMasDesplegable").addEventListener("click",function (){
				var elementShow = document.getElementById("desplegableContenido");
				if(elementShow.style.display=="block"){
					elementShow.style.display="none";
				}else{
					elementShow.style.display="block";
				}
			});
		} */ /* Con Jquery */function r(){a("#verMasDesplegable").click(function(){a("#desplegableContenido").hasClass("active")?(a("#desplegableContenido").hide("slow"),a("#desplegableContenido").removeClass("active")):(a("#desplegableContenido").show("slow"),a("#desplegableContenido").addClass("active"))})}function s(){a(window).scroll(function(){a(window).scrollTop()==a(document).height()-a(window).height()&&a(".js-dms-ajax-more-posts__button").click()})}function t(){a(".js-test").click(function(){a(this).detach();var b=a("<div></div>").text("Loremp").addClass("js-test");a(".dms-template-about-us").append(b),console.log("cambio..."),t()})}function u(){a(".caja").click(function(){var b=a(this).data("id"),c=a(this).data("post-type");/* console.log(id);
				console.log(post_type);
				console.log("/?post_type="+post_type+"&p="+id); */window.location.replace("/?post_type="+c+"&p="+b)})}// END GLOBAL FUNCTIONS ---------------------------- 
// --- ON LOAD --------------------------------------
// --- GLOBAL VARS ---------------------------- 
// COLOR SCROLLBAR
var v=window.innerWidth,w=[],x=".js-dms-custom-select",y=b("mousewheel")?"mousewheel":"wheel",z=// RETURN CORRECT TRANSITION EVENT NAME
function(){var a,b=document.createElement("fakeelement"),c={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(a in c)if(b.style[a]!==void 0)return c[a]}(),A=// RETURN CORRECT ANIMATION EVENT NAME
function(){var a,b=document.createElement("fakeelement"),c={animation:"animationend",OAnimation:"oAnimationEnd",MozAnimation:"animationend",WebkitAnimation:"webkitAnimationEnd"};for(a in c)if(b.style[a]!==void 0)return c[a]}();// COLOR SCROLLBAR IN BOX
n.prototype={initEvents:function(){var b=this;b.dd.on("click",function(){var b=a(this).hasClass("dms-active");return a(x).each(function(){a(this).hasClass("dms-active")&&a(this).removeClass("dms-active")}),b||a(this).toggleClass("dms-active"),!1}),b.opts.on("click",function(){var c=a(this);b.the_text=c.attr("data-label"),b.val=c.attr("data-value"),b.index=c.index(),b.placeholder.text(b.the_text)})},getValue:function(){return this.val},getIndex:function(){return this.index}};a(function(){r(),a(document).ready(function(){new Swiper(".swiper-container");s(),t(),u()}),a(".dms-popup-for-bg-img").click(function(){e(a(this))}),c(x,o),c(".js-dms-search",f),c(".js-dms-to-top",h),c(".js-home-swiper-container",q);// CALL FUNCTION - FOR CUSTOM RGL POPUP
// NEED HOOK CLASS .js-dms-r-popup__open, this elem is the click open popup
// dms_popup_container_classes: [container classes for animation]
// dms_content: [html content]
// dms_icon_classes: [classes for icon close]
var b={// dms_popup_container_classes: "animated zoomIn",
dms_content:custom_data.dms_legal_advice_content_in_popup// dms_icon_classes: "fa fa-times"
};// AJAX MORE POSTS
/* // AJAX MORE NEWS
		dmsCallFn(".js-dms-ajax-more-news__button", dms_ajax_more_news); */ // SOCIAL SHARE EVENTS
// CALL FUNCTION - FOR EXAMPLE
// var dmsExample_args = {
// 	x: "arg_1",
// 	y: "arg_2"
// };
// dmsCallFn(".js-example", dmsExample, dmsExample_args);
// --- ON RESIZE WINDOW EVENT --------------------------------
c(".js-dms-r-popup__open",g,b),c(".js-dms-ajax-more-posts__button",l),c(".js-dms-apss-social",m),c(".js-dmsMenuMobileToggle",d),0==a(".dms-parallax-scene #scene .layer").length?k():(p(),k()),a(window).resize(function(){// RESET MENU MOBILE
// elements
var b=a("#dms-page"),c=a("body"),d=a(".js-mobile-menu"),e=a(".dms-hamburger");c.removeClass("menu-mobile-open"),b.removeClass("menu-mobile-open"),e.removeClass("menu-mobile-open"),d.removeClass("dms-active")})})})(jQuery);
/**
 * @File main.js
 * @description Structuring in MCV
 */ /* window.onload = function () { */var data={editor:null,nextProjects:{nextContent:"",hasNextPage:!0,nextPage:2}},model={init:function(){},saveEditor:function(a){data.editor=a},getEditor:function(){return data.editor},/**
   * @function loadNextProjects
   * @param {Int} page Number of the page to load, default value 1
   * @param {Json} params Json with the query parameters for the request, default value {}
   * @description Execute the request on the server to load the projects by 
   * the specified "page" parameter, by default it takes the value of 1.
   */loadNextProjects:async function(a=1,b={}){await axios.get("/projects/pagination/"+a,{params:b}).then(a=>{data.nextProjects=a.data}).catch(a=>{console.log(a)})}},controller={init:function(){/* console.log("init controller"); */controller.settingNavMenu(),controller.initSlider(),controller.initEditor(),controller.settingNavMenu(),view.init()},deleteProject:function(a){axios.post("/admin/manage-projects/"+a+"/delete",{params:{id:a}}).then(function(a){a.data.delete&&window.location.replace("/admin/manage-projects")}).catch(function(a){console.log(a)})},getCookie:function(a){let b=a+"=",c=decodeURIComponent(document.cookie),d=c.split(";");for(i=0;i<d.length;i++){let a=d[i];for(;" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(b))return a.substring(b.length,a.length)}return""},checkCookie:function(a){let b=controller.getCookie(a);return""!=b},/**
   * @function preViewImages
   * @description Show a pre view of images upload in a input file type 
   * @param {*} event Evento upload image.
   */preViewImages:function(a){let b=view.getContPreViewImages();if(b){b.innerHTML="";let c=a.target.files;for(let a,d=0;d<c.length;d++)a=new FileReader,a.onload=function(a){// The file's text will be printed here
/* console.log(e.target.result); */let c=view.getInputImage();c&&(c.src=a.target.result);let d=document.createElement("img");d.src=a.target.result,b.appendChild(d)},a.readAsDataURL(c[d])}},/**
   * @function initSlider
   * @description look for all elements with class "swiper-container" 
   * if the element has a "type-slider" attribute the slider starts with 
   * this type otherwise the slider starts with the default settings.
   * Supported type: 3D-coverflow.
   */initSlider:function(){let a=document.getElementsByClassName("swiper-container");Array.from(a).forEach(a=>{let b,c=a.getAttribute("type-slider");switch(c){case"3D-coverflow":b={effect:"coverflow",grabCursor:!0,centeredSlides:!0,centeredSlidesBounds:!0,loop:!0,loopFillGroupWithBlank:!0,slidesPerView:"auto",coverflowEffect:{rotate:50,stretch:0,depth:100,modifier:1,slideShadows:!0},pagination:{el:".swiper-pagination"}};break;default:b={slidesPerView:1,spaceBetween:0,centeredSlides:!0,centeredSlidesBounds:!0,breakpoints:{// min width is >= 576px
576:{slidesPerView:"auto",spaceBetween:5}},loop:!0,loopFillGroupWithBlank:!0,autoplay:{delay:2e3},pagination:{el:".swiper-pagination",clickable:!0},navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}};}new Swiper(a,b)})},/**
   * @function initEditor
   * @description Find the first element with id "Editor" and started a quill editor
   * with default config.
   */initEditor:function(){let a=document.querySelector("#editor");a&&(a=new Quill(a,{modules:{toolbar:[[{header:[1,2,3,4,5,6,!1]}],[{size:["small",!1,"large","huge"]}],// custom dropdown
["bold","italic","underline"],// toggled buttons
[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],// dropdown with defaults from theme
[{font:[]}],[{align:[]}],["image","blockquote","code-block"],["clean"],["link"]]},scrollingContainer:"#scrolling-container",placeholder:"Compose an epic...",theme:"snow"}),model.saveEditor(a))},getEditor:function(){return model.getEditor()},/**
   * @function settingNavMenu
   * @description Add the "active" class when the page URL is equal 
   * to the href of the menu item link and removed the "active" class when it is
   * not equal.
   */settingNavMenu:function(){let a=document.querySelector("#nav-menu");if(a){let b=a.getElementsByClassName("nav-item"),c=window.location.pathname.split("/")[1];Array.from(b).forEach(a=>{let b=a.getElementsByClassName("nav-link")[0].getAttribute("href").split("/")[1];b==c?a.classList.add("active"):a.classList.contains("active")&&a.classList.remove("active")})}},/**
   * @function nextProjects
   * @description If there are more projects to load,run the model function 
   * to loads the new data and run the view function to draw the content.
   * If in the URL there is a query parameter "title", it loaded in 
   * the model function
   */nextProjects:async function(){if(data.nextProjects.hasNextPage){let a=new URLSearchParams(window.location.search);params=a.has("title")?{title:a.get("title")}:{},await model.loadNextProjects(data.nextProjects.nextPage,params),view.drawNextProjects(data.nextProjects.nextContent)}}},view={init:function(){/* console.log("init view"); */view.eventShowInputNewPassword(),view.showAdminView(),view.processDeltaToHtml(),view.loadDeltaToEditor(),view.eventShowBlockList(),view.saveFormWithQuillEditor(),view.eventFinalScroll(),view.loadFilterPagination()},getInputImage:function(){return document.querySelector("#inputImage")},getContPreViewImages:function(){return document.querySelector("#contPreViewImages")},/**
   * @function eventShowInputNewPassword
   * @description show the input to new password
   */eventShowInputNewPassword:function(){let a=document.querySelector("#checkNewPassword");a&&a.addEventListener("click",()=>{let b=document.querySelector("#form-group-new-password");a.checked?(a.value=!1,b.style.display="block"):(a.value=!0,b.style.display="none")})},/**
   * @function processDeltaToHtml
   * @description Find all elements with class "delta", need a value
   * attribute with the content in delta format, create a quill container
   * in the DOM to be pre-processed in html format. If the element has a
   * "delta-summary" class, it will take the text in "blockquote" format
   * and take it as a summary of the content. 
   */processDeltaToHtml:function(a=document){try{let b=a.getElementsByClassName("delta");Array.from(b).forEach(a=>{/* console.log(delta); */if(a.getAttribute("value")){let b=JSON.parse(a.getAttribute("value")),c=document.createElement("div"),d=new Quill(c,{});/* console.log(inputDelta); */if(d.setContents(b.ops),a.classList.contains("delta-summary")){let b=c.getElementsByTagName("blockquote")[0];b&&(a.innerHTML=b.innerHTML)}else a.innerHTML=d.root.innerHTML;a.setAttribute("value","")}})}catch(a){console.log(a)}},/**
   *  @function loadDeltaToEditor
   *  @description Finds all the elements that contain the class "editor"
   *  and if these elements have the class "load-delta" and a "value" attribute
   *  will load the content to the quill text editor in delta format.
   */loadDeltaToEditor:function(){try{let a=document.getElementsByClassName("editor");Array.from(a).forEach(a=>{a.classList.contains("load-delta")&&a.getAttribute("value")&&controller.getEditor().setContents(JSON.parse(a.getAttribute("value")))})}catch(a){console.log(a)}},/**
   * @function showAdminView
   * @description Show the "admin" navigation item if you have token
   * authentication.
   */showAdminView:function(){if(controller.checkCookie("token")){let a=document.getElementsByClassName("control-admin");Array.from(a).forEach(a=>{a.style.display="block";let b=a.getElementsByClassName("toggle-admin")[0];b.addEventListener("click",()=>{let b=a.getElementsByClassName("menu-admin")[0];b.classList.contains("active")?b.classList.remove("active"):b.classList.add("active")})})}},/**
   * @function saveFormWithQuillEditor
   * @description Load the content of the quill editor in an input tag
   * to send the content with the form.
   */saveFormWithQuillEditor:function(){var a=document.querySelector(".form-quill");a&&(a.onsubmit=function(){var a=document.querySelector("input[name=content]");a.value=JSON.stringify(controller.getEditor().getContents())})},/**
   * @function eventShowBlockList
   * @description Search all elements with class "block-list-toggle" and attribute 
   * list-id with id of the list to control, then if the list has an "init_state" 
   * attribute equal to "visible" shows the list otherwise, hide the list and 
   * add block-list-height attribute with your default height, 
   * then add a click event to the toggle item to display or hide the list.
   * 
   */eventShowBlockList:function(){let a=document.querySelectorAll(".block-list-toggle[list-id]");Array.from(a).forEach(a=>{var b=a.getAttribute("list-id"),c=document.querySelector("#"+b);c&&(0<c.clientHeight&&(c.setAttribute("block-list-height",c.clientHeight),"visible"==c.getAttribute("init_state")?(c.style.visibility="visible",c.style.height=c.clientHeight+"px"):(c.style.visibility="hidden",c.style.height="0")),a.addEventListener("click",()=>{let b=a.getElementsByTagName("i")[0],d=c.getAttribute("block-list-height");"hidden"==c.style.visibility||""==c.style.visibility?(c.style.visibility="visible",c.style.height=d+"px",b.classList.remove("fa-caret-down"),b.classList.add("fa-caret-up")):(c.style.visibility="hidden",c.style.height="0",b.classList.remove("fa-caret-up"),b.classList.add("fa-caret-down"))}))})},/**
   * @function drawNextProjects
   * @param {String} nextContent Content to draw in the page
   * @description If the page has the class "page-projects", 
   * Find the an element with class "card-deck-projects" and load the content
   * of the param "nextContent"
   */drawNextProjects:function(a){let b=document.querySelector(".page-projects");if(b){let c=b.getElementsByClassName("card-deck-projects")[0];c.innerHTML+=a,view.processDeltaToHtml(c)}},/**
   * @function eventFinalScroll
   * @description When scroll is at the button of the page 
   * it loads the specified functions 
   */eventFinalScroll:function(){window.onscroll=function(){window.innerHeight+window.scrollY>=document.body.scrollHeight&&controller.nextProjects()}},/**
   * @function loadFilterPagination
   * @description Add to the link with the "page-link" class in 
   * the "pagination-item" element the query parameters specified 
   * in the browser's search engine.
   */loadFilterPagination:function(){let a=window.location.search,b=document.querySelectorAll(".pagination-item .page-link[href]");b.forEach(b=>{b.href+=a})}};/* MODEL */controller.init();
//# sourceMappingURL=custom.min.js.map
